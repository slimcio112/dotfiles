\documentclass[12pt,a4paper]{article}

% text formatting
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[polish]{babel}

% geometry
\usepackage[margin=2.5cm, top=3cm, bottom=3cm]{geometry}

% math
\usepackage{amsmath, amssymb, amsthm, mathtools}

% DARK/LIGHT colors
\newif\ifdarkmode
%\darkmodetrue   % <-- uncomment for DARK MODE
\darkmodefalse    % <-- uncomment for LIGHT MODE

% colors and hyperrefs
\usepackage{xcolor}
\usepackage{pagecolor}

\ifdarkmode
  % Catppuccin Mocha (DARK MODE)
  \definecolor{ctpBase}{HTML}{1e1e2e}
  \definecolor{ctpCrust}{HTML}{11111b}
  \definecolor{ctpText}{HTML}{cdd6f4}
  \definecolor{ctpSubtext}{HTML}{a6adc8}
  \definecolor{ctpMauve}{HTML}{cba6f7}
  \definecolor{ctpBlue}{HTML}{89b4fa}
  \definecolor{ctpGreen}{HTML}{a6e3a1}
  \definecolor{ctpRed}{HTML}{f38ba8}
  \definecolor{ctpPeach}{HTML}{fab387}
  \definecolor{ctpLavender}{HTML}{b4befe}
\else
  % Catppuccin Latte (LIGHT MODE)
  \definecolor{ctpBase}{HTML}{ffffff}
  \definecolor{ctpCrust}{HTML}{b0b5c0}
  \definecolor{ctpText}{HTML}{000000}
  \definecolor{ctpSubtext}{HTML}{45475a}
  \definecolor{ctpMauve}{HTML}{7025c9}     
  \definecolor{ctpBlue}{HTML}{104eab}      
  \definecolor{ctpGreen}{HTML}{2f7a1f}     
  \definecolor{ctpRed}{HTML}{b50d32}       
  \definecolor{ctpPeach}{HTML}{d65306}     
  \definecolor{ctpLavender}{HTML}{5b60be}
\fi

\pagecolor{ctpBase}
\color{ctpText}

\usepackage{hyperref}
\hypersetup{
    colorlinks=true,
    linkcolor=ctpBlue,
    urlcolor=ctpPeach,
    citecolor=ctpGreen,
    pdftitle={Notatki z Matematyki},
    pdfauthor={Stanisław Kamzol},
}

% tcolorbox
\usepackage[most]{tcolorbox}

\newtcolorbox{Defi}{
    enhanced,
    colback=ctpBase,
    colframe=ctpMauve,
    coltitle=white,
    coltext=ctpText,
    fonttitle=\bfseries,
    title=Definicja,
    boxed title style={
        colback=ctpMauve,
        colframe=ctpMauve,
        coltext=white,
        boxrule=1pt,
        arc=4pt
    },
    attach boxed title to top left={xshift=6pt,yshift=-2pt},
    boxrule=1pt,
    arc=4pt,
    left=8pt,right=8pt,top=6pt,bottom=6pt
}

\newtcolorbox{Tw}{
    enhanced,
    colback=ctpBase,
    colframe=ctpBlue,
    coltitle=white,
    coltext=ctpText,
    fonttitle=\bfseries,
    title=Twierdzenie,
    boxed title style={
        colback=ctpBlue,
        colframe=ctpBlue,
        coltext=white,
        boxrule=1pt,
        arc=4pt
    },
    attach boxed title to top left={xshift=6pt,yshift=-2pt},
    boxrule=1pt,
    arc=4pt,
    left=8pt,right=8pt,top=6pt,bottom=6pt
}

\newtcolorbox{Prz}{
    enhanced,
    colback=ctpBase,
    colframe=ctpGreen,
    coltitle=white,
    coltext=ctpText,
    fonttitle=\bfseries,
    title=Przykład,
    boxed title style={
        colback=ctpGreen,
        colframe=ctpGreen,
        coltext=white,
        boxrule=1pt,
        arc=4pt
    },
    attach boxed title to top left={xshift=6pt,yshift=-2pt},
    boxrule=1pt,
    arc=4pt,
    left=8pt,right=8pt,top=6pt,bottom=6pt
}

\newtcolorbox{Uw}{
    enhanced,
    colback=ctpBase,
    colframe=ctpPeach,
    coltitle=white,
    coltext=ctpText,
    fonttitle=\bfseries,
    title=Uwaga,
    boxed title style={
        colback=ctpPeach,
        colframe=ctpPeach,
        coltext=white,
        boxrule=1pt,
        arc=4pt
    },
    attach boxed title to top left={xshift=6pt,yshift=-2pt},
    boxrule=1pt,
    arc=4pt,
    left=8pt,right=8pt,top=6pt,bottom=6pt
}

% better section headers
\usepackage{titlesec}
\titleformat{\section}
  {\normalfont\Large\bfseries\color{ctpLavender}}
  {\thesection.}{1em}{}
\titleformat{\subsection}
  {\normalfont\large\bfseries\color{ctpLavender}}
  {\thesubsection.}{1em}{}

\renewcommand{\qedsymbol}{\textcolor{ctpText}{$\blacksquare$}}

